function MtrDatepicker(e) {
    function t(e) {
        n = function() {
            var e = {
                isChrome: !1,
                isSafari: !1,
                isFirefox: !1
            };
            0 <= navigator.userAgent.search("Safari") && navigator.userAgent.search("Chrome") < 0 && (e.isSafari = !0);
            return e;
        }(), u(e) ? (m(e), l = G(c.targetElement), f(), p()) : console.error("Initialization of the datepicker is blocked because of errors in the config.");
    }
    function r(e, t) {
        e = void 0 !== e ? e : z(), t = void 0 !== t ? t : H(), f(e, t), c.datepicker && Array.isArray(c.datepicker) && -1 < c.datepicker.indexOf("dates") && function(e, t) {
            var a = J(G(e), ".mtr-content"), n = J(a, ".mtr-values");
            n.parentNode.removeChild(n);
            var r = b({
                name: t.name,
                values: t.values,
                valuesNames: t.valuesNames
            });
            a.appendChild(r);
        }(c.references.dates, {
            name: "dates",
            values: c.defaultValues.dates,
            valuesNames: c.defaultValues.datesNames
        });
        var a = c.defaultValues.dates[c.defaultValues.dates.length - 1];
        a < V() && M(a);
    }
    var l, c = {
        targetElement: null,
        defaultValues: {
            hours: [],
            minutes: [],
            dates: [],
            datesNames: [],
            months: [],
            years: []
        },
        hours: {
            min: 1,
            max: 12,
            step: 1,
            maxlength: 2
        },
        minutes: {
            min: 0,
            max: 50,
            step: 10,
            maxlength: 2
        },
        months: {
            min: 0,
            max: 11,
            step: 1,
            maxlength: 2
        },
        years: {
            min: 2e3,
            max: 2030,
            step: 1,
            maxlength: 4
        },
        animations: !0,
        smartHours: !1,
        future: !1,
        disableAmPm: !1,
        validateAfter: !0,
        utcTimezone: 0,
        transitionDelay: 100,
        transitionValidationDelay: 500,
        references: {
            hours: null
        },
        datepicker: !0,
        timepicker: !0,
        monthsNames: {
            0: "Jan",
            1: "Feb",
            2: "Mar",
            3: "Apr",
            4: "May",
            5: "Jun",
            6: "Jul",
            7: "Aug",
            8: "Sep",
            9: "Oct",
            10: "Nov",
            11: "Dec"
        },
        daysNames: {
            0: "Sun",
            1: "Mon",
            2: "Tue",
            3: "Wed",
            4: "Thu",
            5: "Fri",
            6: "Sat"
        },
        timezones: null
    }, d = {
        date: null,
        timestamp: null,
        ampm: !0
    }, n = null, a = {
        all: [],
        time: [],
        date: [],
        hour: [],
        minute: [],
        ampm: [],
        day: [],
        month: [],
        year: []
    }, s = {
        onChange: U(a),
        beforeChange: U(a),
        afterChange: U(a)
    }, i = {}, o = null, h = {}, m = function(e) {
        c.targetElement = e.target, c.animations = void 0 !== e.animations ? e.animations : c.animations, 
        c.future = void 0 !== e.future ? e.future : c.future, c.validateAfter = void 0 !== e.validateAfter ? e.validateAfter : c.validateAfter, 
        c.smartHours = void 0 !== e.smartHours ? e.smartHours : c.smartHours, c.disableAmPm = void 0 !== e.disableAmPm ? e.disableAmPm : c.disableAmPm, 
        c.datepicker = void 0 !== e.datepicker ? e.datepicker : c.datepicker, c.timepicker = void 0 !== e.timepicker ? e.timepicker : c.timepicker, 
        c.disableAmPm && (c.hours.min = 0, c.hours.max = 23), d.date = e.timestamp ? new Date(e.timestamp) : new Date(), 
        d.date.setSeconds(0), void 0 !== e.utcTimezone ? (i.timezones = new MtrDatepickerTimezones(), 
        c.utcTimezone = i.timezones.getTimezone(e.utcTimezone)) : c.utcTimezone = {
            offset: void 0 !== e.utcTimezone ? e.utcTimezone : d.date.getTimezoneOffset() / 60 * -1
        };
        var t = d.date.getTime() + 60 * d.date.getTimezoneOffset() * 1e3 + 60 * c.utcTimezone.offset * 60 * 1e3;
        d.date = new Date(t), d.timestamp = d.date.getTime(), c.minutes.min = void 0 !== e.minutes && void 0 !== e.minutes.min ? parseInt(e.minutes.min) : c.minutes.min, 
        c.minutes.max = void 0 !== e.minutes && void 0 !== e.minutes.max ? parseInt(e.minutes.max) : c.minutes.max, 
        c.minutes.step = void 0 !== e.minutes && void 0 !== e.minutes.step ? parseInt(e.minutes.step) : c.minutes.step, 
        c.months.min = void 0 !== e.months && void 0 !== e.months.min ? parseInt(e.months.min) : c.months.min, 
        c.months.max = void 0 !== e.months && void 0 !== e.months.max ? parseInt(e.months.max) : c.months.max, 
        c.months.step = void 0 !== e.months && void 0 !== e.months.step ? parseInt(e.months.step) : c.months.step, 
        c.years.min = void 0 !== e.years && void 0 !== e.years.min ? parseInt(e.years.min) : c.years.min, 
        c.years.max = void 0 !== e.years && void 0 !== e.years.max ? parseInt(e.years.max) : c.years.max, 
        c.years.step = void 0 !== e.years && void 0 !== e.years.step ? parseInt(e.years.step) : c.years.step, 
        c.defaultValues.hours = q(c.hours), c.defaultValues.minutes = q(c.minutes), c.defaultValues.months = q(c.months), 
        c.defaultValues.years = q(c.years);
    }, u = function(e) {
        var t, a, n = !0;
        if (void 0 !== e.datepicker && void 0 !== e.timepicker && (e.datepicker || e.timepicker || (console.error("Invalid configuration: cannot disable both datepicker and timepicker at the same time."), 
        n = !1)), e.minutes && (void 0 === e.minutes.min || X(e.minutes.min) || (console.error("Invalid argument: minutes.min should be a number."), 
        n = !1), void 0 === e.minutes.max || X(e.minutes.max) || (console.error("Invalid argument: minutes.max should be a number."), 
        n = !1), void 0 === e.minutes.step || X(e.minutes.step) || (console.error("Invalid argument: minutes.step should be a number."), 
        n = !1), void 0 !== e.minutes.min && void 0 !== e.minutes.max && e.minutes.max < e.minutes.min && (console.error("Invalid argument: minutes.max should be larger than minutes.min."), 
        n = !1), void 0 !== e.minutes.min && void 0 !== e.minutes.max && void 0 !== e.minutes.step && e.minutes.step > e.minutes.max - e.minutes.min && (console.error("Invalid argument: minutes.step should be less than minutes.max-minutes.min."), 
        n = !1)), e.hours && (void 0 === e.hours.min || X(e.hours.min) || (console.error("Invalid argument: hours.min should be a number."), 
        n = !1), void 0 === e.hours.max || X(e.hours.max) || (console.error("Invalid argument: hours.max should be a number."), 
        n = !1), void 0 === e.hours.step || X(e.hours.step) || (console.error("Invalid argument: hours.step should be a number."), 
        n = !1), void 0 !== e.hours.min && void 0 !== e.hours.max && e.hours.max < e.hours.min && (console.error("Invalid argument: hours.max should be larger than hours.min."), 
        n = !1), void 0 !== e.hours.min && void 0 !== e.hours.max && void 0 !== e.hours.step && e.hours.step > e.hours.max - e.hours.min && (console.error("Invalid argument: hours.step should be less than hours.max-hours.min."), 
        n = !1)), e.dates && (void 0 === e.dates.min || X(e.dates.min) || (console.error("Invalid argument: dates.min should be a number."), 
        n = !1), void 0 === e.dates.max || X(e.dates.max) || (console.error("Invalid argument: dates.max should be a number."), 
        n = !1), void 0 === e.dates.step || X(e.dates.step) || (console.error("Invalid argument: dates.step should be a number."), 
        n = !1), void 0 !== e.dates.min && void 0 !== e.dates.max && e.dates.max < e.dates.min && (console.error("Invalid argument: dates.max should be larger than dates.min."), 
        n = !1), void 0 !== e.dates.min && void 0 !== e.dates.max && void 0 !== e.dates.step && e.dates.step > e.dates.max - e.dates.min && (console.error("Invalid argument: dates.step should be less than dates.max-dates.min."), 
        n = !1)), e.months && (void 0 === e.months.min || X(e.months.min) || (console.error("Invalid argument: months.min should be a number."), 
        n = !1), void 0 === e.months.max || X(e.months.max) || (console.error("Invalid argument: months.max should be a number."), 
        n = !1), void 0 === e.months.step || X(e.months.step) || (console.error("Invalid argument: months.step should be a number."), 
        n = !1), void 0 !== e.months.min && void 0 !== e.months.max && e.months.max < e.months.min && (console.error("Invalid argument: months.max should be larger than months.min."), 
        n = !1), void 0 !== e.months.min && void 0 !== e.months.max && void 0 !== e.months.step && e.months.step > e.months.max - e.months.min && (console.error("Invalid argument: months.step should be less than months.max-months.min."), 
        n = !1)), e.years && (void 0 === e.years.min || X(e.years.min) || (console.error("Invalid argument: years.min should be a number."), 
        n = !1), void 0 === e.years.max || X(e.years.max) || (console.error("Invalid argument: years.max should be a number."), 
        n = !1), void 0 === e.years.step || X(e.years.step) || (console.error("Invalid argument: years.step should be a number."), 
        n = !1), void 0 !== e.years.min && void 0 !== e.years.max && e.years.max < e.years.min && (console.error("Invalid argument: years.max should be larger than years.min."), 
        n = !1), void 0 !== e.years.min && void 0 !== e.years.max && void 0 !== e.years.step && e.years.step > e.years.max - e.years.min && (console.error("Invalid argument: years.step should be less than years.max-years.min."), 
        n = !1)), e.timestamp && e.future && (t = new Date(e.timestamp), a = new Date(), 
        t.getTime() < a.getTime() && (console.error("Invalid argument: timestamp should be in the future if the future check is enabled."), 
        n = !1)), void 0 !== e.utcTimezone && "function" != typeof MtrDatepickerTimezones && (console.error("In order to use the timezones feature you should load the mtr-datepicker-timezones.min.js first."), 
        n = !1), !n) {
            for (l = G(e.target); l.firstChild; ) l.removeChild(l.firstChild);
            var r = document.createElement("div");
            Z(r, "mtr-error-message"), r.appendChild(document.createTextNode("An error has occurred during the initialization of the datepicker.")), 
            l.appendChild(r);
        }
        return n;
    }, f = function(e, t) {
        var a = function(e, t) {
            for (var a, n = new Date(t, e, 1), r = new Date(t, e + 1, 0), s = {
                values: [],
                names: [],
                min: n.getDate(),
                max: r.getDate(),
                step: 1
            }, i = n.getDate(); i <= r.getDate(); i++) a = new Date(t, e, i), s.values.push(i), 
            s.names[i] = c.daysNames[a.getDay()];
            return s;
        }(e = void 0 !== e ? e : z(), t = void 0 !== t ? t : H());
        c.dates = {
            min: a.min,
            max: a.max,
            step: a.step,
            maxlength: 2
        }, c.defaultValues.dates = a.values, c.defaultValues.datesNames = a.names;
    }, p = function() {
        for (R(l, "mtr-datepicker"), Z(l, "mtr-datepicker"); l.firstChild; ) l.removeChild(l.firstChild);
        var e, t, a, n, r, s, i, o, m, u;
        c.timepicker && (e = v({
            name: "hours",
            values: c.defaultValues.hours,
            value: T()
        }), t = v({
            name: "minutes",
            values: c.defaultValues.minutes,
            value: A()
        }), c.disableAmPm || (a = g({
            name: "ampm"
        })), (n = document.createElement("div")).className = "mtr-row", (r = document.createElement("div")).className = "mtr-clearfix", 
        n.appendChild(e), n.appendChild(t), c.disableAmPm || n.appendChild(a), l.appendChild(n), 
        l.appendChild(r)), c.datepicker && (s = v({
            name: "months",
            values: c.defaultValues.months,
            valuesNames: c.monthsNames,
            value: z()
        }), i = v({
            name: "dates",
            values: c.defaultValues.dates,
            valuesNames: c.defaultValues.datesNames,
            value: V()
        }), o = v({
            name: "years",
            values: c.defaultValues.years,
            value: H()
        }), (m = document.createElement("div")).className = "mtr-row", (u = document.createElement("div")).className = "mtr-clearfix", 
        Array.isArray(c.datepicker) ? c.datepicker.forEach(function(e) {
            switch (e) {
              case "months":
                m.appendChild(s);
                break;

              case "dates":
                m.appendChild(i);
                break;

              case "years":
                m.appendChild(o);
            }
        }) : (m.appendChild(s), m.appendChild(i), m.appendChild(o)), l.appendChild(m), l.appendChild(u)), 
        L(d.timestamp);
    }, v = function(o) {
        var e = document.createElement("div");
        e.className = "mtr-input-slider", c.references[o.name] = c.targetElement + "-input-" + o.name, 
        e.id = c.references[o.name];
        var t, a, n = ((t = document.createElement("div")).className = "mtr-arrow up", t.appendChild(document.createElement("span")), 
        t.addEventListener("click", function() {
            Z(u, "arrow-click"), Z(s, "mtr-active"), h[o.name] && window.clearTimeout(h[o.name]), 
            h[o.name] = setTimeout(function() {
                R(u, "arrow-click"), R(s, "mtr-active");
            }, 1e3);
            var e, t = o.name;
            switch (t) {
              case "hours":
                e = T();
                break;

              case "minutes":
                e = A();
                break;

              case "dates":
                e = V();
                break;

              case "months":
                e = z();
                break;

              case "years":
                e = H();
            }
            var a = c.defaultValues[t].indexOf(e);
            switch (++a >= c.defaultValues[t].length && (a = 0), t) {
              case "hours":
                var n = c.defaultValues[t][a];
                !c.disableAmPm && I() && 12 !== n && (n += 12), k(n);
                break;

              case "minutes":
                E(c.defaultValues[t][a]);
                break;

              case "dates":
                M(c.defaultValues[t][a]);
                break;

              case "months":
                S(c.defaultValues[t][a]);
                break;

              case "years":
                P(c.defaultValues[t][a]);
            }
        }, !1), t), r = ((a = document.createElement("div")).className = "mtr-arrow down", 
        a.appendChild(document.createElement("span")), a.addEventListener("click", function(e) {
            Z(u, "arrow-click"), Z(s, "mtr-active"), h[o.name] && window.clearTimeout(h[o.name]), 
            h[o.name] = setTimeout(function() {
                R(u, "arrow-click"), R(s, "mtr-active");
            }, 1e3);
            var t, a = o.name;
            switch (a) {
              case "hours":
                t = T();
                break;

              case "minutes":
                t = A();
                break;

              case "dates":
                t = V();
                break;

              case "months":
                t = z();
                break;

              case "years":
                t = H();
            }
            var n = c.defaultValues[a].indexOf(t);
            switch (--n < 0 && (n = c.defaultValues[a].length - 1), a) {
              case "hours":
                var r = c.defaultValues[a][n];
                !c.disableAmPm && I() && 12 !== r && (r += 12), k(r);
                break;

              case "minutes":
                E(c.defaultValues[a][n]);
                break;

              case "dates":
                M(c.defaultValues[a][n]);
                break;

              case "months":
                S(c.defaultValues[a][n]);
                break;

              case "years":
                P(c.defaultValues[a][n]);
            }
        }, !1), a), s = document.createElement("div");
        s.className = "mtr-content";
        var m, i, u = ((m = document.createElement("input")).value = o.value, m.type = "text", 
        m.className = "mtr-input " + o.name, m.style.display = "none", m.addEventListener("blur", function(n) {
            setTimeout(function() {
                !function() {
                    if (l) {
                        var e = m.value, t = m.getAttribute("data-old-value");
                        if (-1 < n.target.className.indexOf("arrow-click")) return R(n.target, "arrow-click");
                        if (-1 < m.className.indexOf("months") && e--, !1 === y(o.name, e)) return m.value = t, 
                        m.focus();
                        e = parseInt(e);
                        var a = o.name.substring(0, o.name.length - 1);
                        if ("dates" === o.name && (a = "day"), c.future && !x(a, e, t)) return "months" === o.name && t++, 
                        m.value = t, m.focus();
                        switch (m.style.display = "none", o.name) {
                          case "hours":
                            k(e);
                            break;

                          case "minutes":
                            E(e);
                            break;

                          case "dates":
                            M(e);
                            break;

                          case "months":
                            S(e);
                            break;

                          case "years":
                            P(e);
                        }
                    }
                }();
            }, 500);
        }, !1), m.addEventListener("keyup", function(e) {
            13 === e.keyCode && (e.preventDefault(), m.blur());
        }, !1), m.addEventListener("wheel", function(e) {
            e.preventDefault(), e.stopPropagation();
            var t, a = e.wheelDeltaY ? e.wheelDeltaY : -1 * e.deltaY, n = parseInt(m.value), r = c[o.name].min, s = c[o.name].max, i = c[o.name].step;
            return "months" === o.name && (r++, s++), t = 0 < a ? n < s ? n + i : r : r < n ? n - i : s, 
            m.value = t, !1;
        }, !1), m), d = ((i = b(o)).addEventListener("touchstart", function(e) {
            var t;
            K = (t = e).touches[0].clientX, Q = t.touches[0].clientY;
        }, !1), i.addEventListener("touchmove", function(e) {
            !function(e, t) {
                var a, n, r, s;
                K && Q && (a = e.touches[0].clientX, n = e.touches[0].clientY, r = K - a, s = Q - n, 
                Math.abs(r) > Math.abs(s) || t(0 < s ? 1 : -1), Q = K = null);
            }(e, function(e) {
                var t = i.parentElement.parentElement, a = J(t, 0 < e ? ".mtr-arrow.up" : ".mtr-arrow.down");
                a.click();
            });
        }, !1), i);
        return e.appendChild(n), s.appendChild(u), s.appendChild(d), e.appendChild(s), e.appendChild(r), 
        e;
    }, g = function(e) {
        var t = document.createElement("div");
        t.className = "mtr-input-radio", c.references[e.name] = c.targetElement + "-input-" + e.name, 
        t.id = c.references[e.name];
        var a = document.createElement("form");
        a.name = c.references[e.name];
        var n = s("ampm", 1, "AM"), r = s("ampm", 0, "PM");
        function s(e, t, a) {
            var n = document.createElement("div"), r = document.createElement("label"), s = document.createElement("input"), i = c.targetElement + "-radio-" + e + "-" + a, o = document.createElement("span");
            o.className = "value", o.appendChild(document.createTextNode(a));
            var m = document.createElement("span");
            return m.className = "radio", r.setAttribute("for", i), r.appendChild(o), r.appendChild(m), 
            s.className = "mtr-input ", s.type = "radio", s.name = e, s.id = i, s.value = t, 
            n.appendChild(s), n.appendChild(r), s.addEventListener("change", function(e) {
                if (!w(t) && c.future) return w(!t), e.preventDefault(), e.stopPropagation(), !1;
            }, !1), n;
        }
        return a.appendChild(n), a.appendChild(r), a.ampm.value = N() ? "1" : "0", t.appendChild(a), 
        t;
    }, b = function(s) {
        var i = document.createElement("div");
        i.className = "mtr-values", s.values.forEach(function(e) {
            var t = "months" === s.name ? e + 1 : e, a = document.createElement("div");
            a.className = "mtr-default-value-holder", a.setAttribute("data-value", e);
            var n, r = document.createElement("div");
            r.className = "mtr-default-value", r.setAttribute("data-value", e), "minutes" === s.name && 0 === e ? r.appendChild(document.createTextNode("00")) : r.appendChild(document.createTextNode(t)), 
            a.appendChild(r), s.valuesNames && ((n = document.createElement("div")).className = "mtr-default-value-name", 
            n.appendChild(document.createTextNode(s.valuesNames[e])), r.className += " has-name", 
            a.appendChild(n)), i.appendChild(a);
        });
        function e() {
            var e = J(i.parentElement, ".mtr-input");
            -1 < e.className.indexOf("months") && (e.value = parseInt(e.value) + 1), e.style.display = "block", 
            e.focus();
        }
        return i.addEventListener("click", e, !1), i.addEventListener("touchstart", e, !1), 
        i.addEventListener("touchend", e, !1), i.addEventListener("wheel", function(e) {
            if (e.preventDefault(), e.stopPropagation(), o) return !1;
            var t = e.target.parentElement.parentElement.parentElement.parentElement, a = J(t, 0 < (e.wheelDeltaY ? e.wheelDeltaY : -1 * e.deltaY) ? ".mtr-arrow.up" : ".mtr-arrow.down");
            return o = setTimeout(function() {
                C();
            }, 100), a.click(), !1;
        }, !1), i.addEventListener("touchstart", function(e) {
            return e.preventDefault(), e.stopPropagation(), !1;
        }, !1), i.addEventListener("touchmove", function(e) {
            return e.preventDefault(), e.stopPropagation(), !1;
        }, !1), i;
    }, y = function(e, t) {
        return t = parseInt(t), -1 < c.defaultValues[e].indexOf(t);
    }, x = function(e, t, a) {
        if (!1 === c.future) return !0;
        var n = new Date(), r = new Date(d.date.getTime());
        switch (e) {
          case "hour":
            N() && 12 === t && (t = 0), r.setHours(t);
            break;

          case "minute":
            r.setMinutes(t);
            break;

          case "ampm":
            var s = r.getHours(), i = s;
            t !== a && (!0 === t && 12 < s ? i = s - 12 : !0 === t && 12 === s ? i = 0 : !1 === t && s < 12 ? i = s + 12 : !1 === t && 12 === s && (i = 12)), 
            r.setHours(i);
            break;

          case "day":
            r.setDate(t);
            break;

          case "month":
            r.setMonth(t);
            break;

          case "year":
            r.setFullYear(t);
        }
        return n.setSeconds(0), n.setMilliseconds(0), r.setSeconds(0), r.setMilliseconds(0), 
        !(r.getTime() < n.getTime());
    }, C = function() {
        o = null;
    }, k = function(e, t) {
        var a, n = d.date.getHours(), r = x("hour", e, n), s = N();
        !c.disableAmPm && c.smartHours && 12 === e && s && (r = !0), c.validateAfter || r ? (j("hour", "beforeChange", e, n), 
        a = e, !c.disableAmPm && 12 < e && (e -= 12), O(c.references.hours, e, t), c.validateAfter && !r ? (Y(c.references.hours), 
        setTimeout(function() {
            !c.disableAmPm && 12 < n && (n -= 12), O(c.references.hours, n, t), j("hour", "onChange", e, n), 
            j("hour", "afterChange", e, n);
        }, c.transitionValidationDelay)) : (d.timestamp = d.date.setHours(a), !c.disableAmPm && c.smartHours && 12 === a && s ? (d.timestamp = d.date.setHours(12), 
        w(!1)) : c.disableAmPm || !c.smartHours || 23 !== a && 11 !== a || 12 !== n || s ? c.disableAmPm || c.smartHours || 12 !== a || !s ? d.timestamp = d.date.setHours(a) : d.timestamp = d.date.setHours(0) : (a = 11, 
        d.timestamp = d.date.setHours(a), w(!0)), !c.disableAmPm && 12 < a && (a -= 12, 
        w(!1)), j("hour", "onChange", e, n), j("hour", "afterChange", e, n))) : Y(c.references.hours);
    }, T = function() {
        var e = d.date.getHours();
        if (c.disableAmPm) return e;
        var t = N();
        return 12 === e || 0 === e ? 12 : e < 12 && t ? e : e - 12;
    }, E = function(e, t) {
        var a = d.date.getMinutes(), n = x("minute", e, a);
        c.validateAfter || n ? (j("minute", "beforeChange", e, a), O(c.references.minutes, e, t), 
        c.validateAfter && !n ? (Y(c.references.minutes), setTimeout(function() {
            O(c.references.minutes, a, t), j("minute", "onChange", e, a), j("minute", "afterChange", e, a);
        }, c.transitionValidationDelay)) : (d.timestamp = d.date.setMinutes(e), j("minute", "onChange", e, a), 
        j("minute", "afterChange", e, a))) : Y(c.references.minutes);
    }, A = function() {
        return d.date.getMinutes();
    }, w = function(e) {
        if (!c.disableAmPm) {
            e = !!e;
            var t = N();
            if (!x("ampm", e, t)) return F(c.references.ampm, e), n.isSafari && setTimeout(function() {
                D(c.references.ampm, t);
            }, 10), !1;
            j("ampm", "beforeChange", e, t);
            var a = d.date.getHours();
            return N() !== e && (!0 === e && 12 <= a ? (a -= 12, d.timestamp = d.date.setHours(a)) : !1 === e && a < 12 && (a += 12, 
            d.timestamp = d.date.setHours(a))), d.ampm = e, D(c.references.ampm, e), j("ampm", "onChange", e, t), 
            j("ampm", "afterChange", e, t), !0;
        }
    }, D = function(e, t) {
        var a, n, r;
        c.timepicker && !c.disableAmPm && ((a = J(G(e), "form")).ampm.value = t ? "1" : "0", 
        n = J(a, 'input.mtr-input[type="radio"][value="1"]'), r = J(a, 'input.mtr-input[type="radio"][value="0"]'), 
        t ? (n.setAttribute("checked", ""), n.checked = !0, r.removeAttribute("checked")) : (r.setAttribute("checked", ""), 
        r.checked = !0, n.removeAttribute("checked")));
    }, N = function() {
        var e = d.date.getHours();
        return 0 <= e && e <= 11;
    }, I = function() {
        return !N();
    }, M = function(e, t) {
        var a = d.date.getDate(), n = x("day", e, a);
        c.validateAfter || n ? (j("day", "beforeChange", e, a), O(c.references.dates, e, t), 
        c.validateAfter && !n ? (Y(c.references.dates), setTimeout(function() {
            O(c.references.dates, a, t), j("day", "onChange", e, a), j("day", "afterChange", e, a);
        }, c.transitionValidationDelay)) : (d.timestamp = d.date.setDate(e), j("day", "onChange", e, a), 
        j("day", "afterChange", e, a))) : Y(c.references.dates);
    }, V = function() {
        return d.date.getDate();
    }, S = function(e, t) {
        var a = d.date.getMonth(), n = x("month", e, a);
        c.validateAfter || n ? (j("month", "beforeChange", e, a), O(c.references.months, e, t), 
        c.validateAfter && !n ? (Y(c.references.months), setTimeout(function() {
            O(c.references.months, a, t), j("month", "onChange", e, a), j("month", "afterChange", e, a);
        }, c.transitionValidationDelay)) : (d.timestamp = d.date.setMonth(e), r(e), j("month", "onChange", e, a), 
        j("month", "afterChange", e, a))) : Y(c.references.months);
    }, z = function() {
        return d.date.getMonth();
    }, P = function(e, t) {
        var a = d.date.getFullYear(), n = x("year", e, a);
        c.validateAfter || n ? (j("year", "beforeChange", e, a), r(void 0, e), O(c.references.years, e, t), 
        c.validateAfter && !n ? (Y(c.references.years), setTimeout(function() {
            O(c.references.years, a, t), j("year", "onChange", e, a), j("year", "afterChange", e, a);
        }, c.transitionValidationDelay)) : (d.timestamp = d.date.setFullYear(e), j("year", "onChange", e, a), 
        j("year", "afterChange", e, a))) : Y(c.references.years);
    }, H = function() {
        return d.date.getFullYear();
    }, L = function(e) {
        var t = W(e);
        d.date = new Date(t), d.timestamp = t;
        var a = d.date.getHours(), n = A(), r = 0 <= a && a < 12, s = V(), i = z(), o = H();
        k(a = 0 === a ? 12 : a), E(n), S(i), P(o), M(s), w(r);
    }, O = function(e, t, a) {
        var n, r, s, i, o, m = G(e);
        a = a || !1, m && (n = J(m, ".mtr-content"), r = J(m, '.mtr-values .mtr-default-value[data-value="' + t + '"]'), 
        s = J(m, ".mtr-arrow.up"), i = J(m, ".mtr-input"), o = function(e, t) {
            if (e && t) return t.offsetTop - e.offsetTop;
            return 0;
        }(n, r) + s.clientHeight, i.value = t, i.setAttribute("data-old-value", t), !1 === c.animations || a ? r.scrollIntoView() : B(n, o, c.transitionDelay));
    }, Y = function(e) {
        var t = J(G(e), ".mtr-content");
        Z(t, "mtr-error"), setTimeout(function() {
            R(t, "mtr-error");
        }, c.transitionValidationDelay + 300);
    }, F = function(e, t) {
        "boolean" == typeof t && (t = !0 === t ? 1 : 0);
        var a = J(G(e), '.mtr-input[value="' + t + '"]');
        Z(a, "mtr-error"), setTimeout(function() {
            R(a, "mtr-error");
        }, c.transitionValidationDelay + 300);
    }, j = function(t, e, a, n) {
        function r(e) {
            e(t, a, n);
        }
        switch (s[e][t].forEach(function(e) {
            r(e);
        }), s[e].all.forEach(function(e) {
            r(e);
        }), t) {
          case "hour":
          case "minute":
          case "ampm":
            s[e].time.forEach(function(e) {
                r(e);
            });
            break;

          case "day":
          case "month":
          case "year":
            s[e].date.forEach(function(e) {
                r(e);
            });
        }
    };
    function G(e) {
        return document.getElementById(e);
    }
    function J(e, t) {
        return e ? e.querySelector(t) : null;
    }
    function U(e) {
        var t;
        if (null === e || "object" != typeof e) return e;
        if (e instanceof Array) {
            t = [];
            for (var a = 0, n = e.length; a < n; a++) t[a] = U(e[a]);
            return t;
        }
        if (e instanceof Object) {
            for (var r in t = {}, e) e.hasOwnProperty(r) && (t[r] = U(e[r]));
            return t;
        }
        throw new Error("Unable to copy obj! Its type isn't supported.");
    }
    function Z(e, t) {
        e && (-1 < e.className.indexOf(t) || (e.className += " " + t));
    }
    function R(e, t) {
        e && -1 !== e.className.indexOf(t) && (e.className = e.className.replace(new RegExp(t, "g"), ""));
    }
    function X(e) {
        return Number(e) === e && e % 1 == 0;
    }
    function q(e) {
        for (var t = e.min, a = e.max, n = e.step, r = [], s = t; s <= a; s += n) r.push(s);
        return r;
    }
    var B = function(n, e, t) {
        var r, s, i, o, m, u;
        e = Math.round(e), (t = Math.round(t)) < 0 || (0 !== t ? (r = Date.now(), s = r + t, 
        i = n.scrollTop, o = e - i, m = n.scrollTop, u = function() {
            var e, t, a;
            n.scrollTop === m && (e = Date.now(), t = function(e, t, a) {
                if (a <= e) return 0;
                if (t <= a) return 1;
                var n = (a - e) / (t - e);
                return n * n * (3 - 2 * n);
            }(r, s, e), a = Math.round(i + o * t), n.scrollTop = a, s <= e || n.scrollTop === m && n.scrollTop !== a || (m = n.scrollTop, 
            setTimeout(function() {
                u();
            }, 0)));
        }, setTimeout(function() {
            u();
        }, 0)) : n.scrollTop = e);
    }, W = function(e) {
        var t = 60 * c.minutes.step * 1e3, a = 0;
        return 1 < c.minutes.step && (a = (t - e % t) % e), e + a;
    }, K = null, Q = null;
    function $() {
        return d.date.toDateString();
    }
    var _ = function() {
        if (i.timezones) {
            var e = "";
            return e += d.date.toTimeString().split(" ")[0], e += " GMT" + (0 < c.utcTimezone.offset ? "+" : "-") + (Math.abs(c.utcTimezone.offset) < 10 ? "0" : "") + Math.abs(c.utcTimezone.offset) + "00", 
            e += " (" + c.utcTimezone.abbr + ")";
        }
        return d.date.toTimeString();
    };
    this.init = t, this.setConfig = m, this.destroy = function() {
        for (Object.keys(s).forEach(function(t) {
            Object.keys(s[t]).forEach(function(e) {
                s[t][e] = [];
            });
        }); l.firstChild; ) l.removeChild(l.firstChild);
    }, this.getTime = function() {
        return T() + ":" + A();
    }, this.getFullTime = function() {
        var e = T(), t = A();
        return t <= 9 && (t = "0" + t), e + ":" + t + " " + (N() ? "AM" : "PM");
    }, this.getTimestamp = function() {
        return d.date.getTime();
    }, this.setHours = k, this.setMinutes = E, this.setAmPm = w, this.setDate = M, this.setMonth = S, 
    this.setYear = P, this.setTimestamp = L, this.values = d, this.toDateString = $, 
    this.toGMTString = function() {
        var e = d.date.getTime() - 60 * d.date.getTimezoneOffset() * 1e3 - 60 * c.utcTimezone.offset * 60 * 1e3;
        return new Date(e).toGMTString();
    }, this.toISOString = function() {
        return d.date.toISOString();
    }, this.toLocaleDateString = function() {
        return d.date.toLocaleDateString();
    }, this.toLocaleString = function() {
        return d.date.toLocaleString();
    }, this.toLocaleTimeString = function() {
        return d.date.toLocaleTimeString();
    }, this.toString = function() {
        return i.timezones ? $() + " " + _() : d.date.toString();
    }, this.toTimeString = _, this.toUTCString = function() {
        var e = d.date.getTime() - 60 * d.date.getTimezoneOffset() * 1e3 - 60 * c.utcTimezone.offset * 60 * 1e3;
        return new Date(e).toUTCString();
    }, this.format = function(e) {
        var t = T(), a = A(), n = N(), r = V(), s = z() + 1, i = H(), o = c.utcTimezone.offset;
        function m(e, t, a) {
            var n = new RegExp(t + "(?!#%#)", "g");
            return e = e.replace(n, a + "#%#");
        }
        function u(e) {
            return e <= 9 ? "0" + e : e;
        }
        function d(e, t) {
            return c.disableAmPm ? e : 12 === e ? t ? 0 : 12 : t ? e : e + 12;
        }
        return e = m(e, "DD", u(r)), e = m(e, "D", r), e = m(e, "YYYY", i), e = m(e, "YY", i.toString().substr(2)), 
        e = m(e, "Y", i), e = m(e, "HH", u(d(t, n))), e = m(e, "hh", u(t)), e = m(e, "H", d(t, n)), 
        e = m(e, "h", t), e = m(e, "mm", u(a)), e = m(e, "m", A()), e = m(e, "a", n ? "am" : "pm"), 
        e = m(e, "A", n ? "AM" : "PM"), e = m(e, "MMM", c.monthsNames[s - 1]), e = m(e, "MM", u(s)), 
        e = m(e, "M", s), e = m(e, "ZZ", (0 < o ? "+" : "-") + u(Math.abs(o)) + ":00"), 
        e = (e = m(e, "Z", (0 < o ? "+" : "-") + Math.abs(o) + ":00")).split("#%#").join("");
    }, this.onChange = function(e, t) {
        s.onChange[e].push(t);
    }, this.beforeChange = function(e, t) {
        s.beforeChange[e].push(t);
    }, this.afterChange = function(e, t) {
        s.afterChange[e].push(t);
    }, t(e);
}